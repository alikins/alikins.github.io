

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>ansible.template package &mdash; Ansible 1 documentation</title>
  

  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  

  

  
    <link rel="top" title="Ansible 1 documentation" href="../index.html"/> 

  
  <script src="../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../index.html" class="icon icon-home"> Ansible
          

          
          </a>

          
            
            
              <div class="version">
                2.2
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <ul class="simple">
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../index.html">Ansible</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          

 



<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../index.html">Docs</a> &raquo;</li>
      
    <li>ansible.template package</li>
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="../_sources/rst/ansible.template.txt" rel="nofollow"> View page source</a>
          
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="module-ansible.template">
<span id="ansible-template-package"></span><h1>ansible.template package<a class="headerlink" href="#module-ansible.template" title="Permalink to this headline">¶</a></h1>
<dl class="class">
<dt id="ansible.template.Templar">
<em class="property">class </em><code class="descclassname">ansible.template.</code><code class="descname">Templar</code><span class="sig-paren">(</span><em>loader</em>, <em>shared_loader_obj=None</em>, <em>variables={}</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/ansible/template.html#Templar"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ansible.template.Templar" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">object</span></code></p>
<p>The main class for templating, with the main entry-point of template().</p>
<dl class="method">
<dt id="ansible.template.Templar.set_available_variables">
<code class="descname">set_available_variables</code><span class="sig-paren">(</span><em>variables</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/ansible/template.html#Templar.set_available_variables"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ansible.template.Templar.set_available_variables" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets the list of template variables this Templar instance will use
to template things, so we don&#8217;t have to pass them around between
internal methods. We also clear the template cache here, as the variables
are being changed.</p>
</dd></dl>

<dl class="method">
<dt id="ansible.template.Templar.template">
<code class="descname">template</code><span class="sig-paren">(</span><em>variable, convert_bare=False, preserve_trailing_newlines=True, escape_backslashes=True, fail_on_undefined=None, overrides=None, convert_data=True, static_vars=[''], cache=True, bare_deprecated=True</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/ansible/template.html#Templar.template"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ansible.template.Templar.template" title="Permalink to this definition">¶</a></dt>
<dd><p>Templates (possibly recursively) any given data as input. If convert_bare is
set to True, the given data will be wrapped as a jinja2 variable (&#8216;{{foo}}&#8217;)
before being sent through the template engine.</p>
</dd></dl>

</dd></dl>

<div class="section" id="submodules">
<h2>Submodules<a class="headerlink" href="#submodules" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="module-ansible.template.safe_eval">
<span id="ansible-template-safe-eval-module"></span><h2>ansible.template.safe_eval module<a class="headerlink" href="#module-ansible.template.safe_eval" title="Permalink to this headline">¶</a></h2>
<dl class="function">
<dt id="ansible.template.safe_eval.safe_eval">
<code class="descclassname">ansible.template.safe_eval.</code><code class="descname">safe_eval</code><span class="sig-paren">(</span><em>expr</em>, <em>locals={}</em>, <em>include_exceptions=False</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/ansible/template/safe_eval.html#safe_eval"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ansible.template.safe_eval.safe_eval" title="Permalink to this definition">¶</a></dt>
<dd><p>This is intended for allowing things like:
with_items: a_list_variable</p>
<p>Where Jinja2 would return a string but we do not want to allow it to
call functions (outside of Jinja2, where the env is constrained). If
the input data to this function came from an untrusted (remote) source,
it should first be run through _clean_data_struct() to ensure the data
is further sanitized prior to evaluation.</p>
<p>Based on:
<a class="reference external" href="http://stackoverflow.com/questions/12523516/using-ast-and-whitelists-to-make-pythons-eval-safe">http://stackoverflow.com/questions/12523516/using-ast-and-whitelists-to-make-pythons-eval-safe</a></p>
</dd></dl>

</div>
<div class="section" id="module-ansible.template.template">
<span id="ansible-template-template-module"></span><h2>ansible.template.template module<a class="headerlink" href="#module-ansible.template.template" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="ansible.template.template.AnsibleJ2Template">
<em class="property">class </em><code class="descclassname">ansible.template.template.</code><code class="descname">AnsibleJ2Template</code><a class="reference internal" href="../_modules/ansible/template/template.html#AnsibleJ2Template"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ansible.template.template.AnsibleJ2Template" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">jinja2.environment.Template</span></code></p>
<p>A helper class, which prevents Jinja2 from running _jinja2_vars through dict().
Without this, {% include %} and similar will create new contexts unlike the special
one created in template_from_file. This ensures they are all alike, except for
potential locals.</p>
<dl class="method">
<dt id="ansible.template.template.AnsibleJ2Template.new_context">
<code class="descname">new_context</code><span class="sig-paren">(</span><em>vars=None</em>, <em>shared=False</em>, <em>locals=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/ansible/template/template.html#AnsibleJ2Template.new_context"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ansible.template.template.AnsibleJ2Template.new_context" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

</div>
<div class="section" id="module-ansible.template.vars">
<span id="ansible-template-vars-module"></span><h2>ansible.template.vars module<a class="headerlink" href="#module-ansible.template.vars" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="ansible.template.vars.AnsibleJ2Vars">
<em class="property">class </em><code class="descclassname">ansible.template.vars.</code><code class="descname">AnsibleJ2Vars</code><span class="sig-paren">(</span><em>templar</em>, <em>globals</em>, <em>locals=None</em>, <em>*extras</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/ansible/template/vars.html#AnsibleJ2Vars"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ansible.template.vars.AnsibleJ2Vars" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">object</span></code></p>
<p>Helper class to template all variable content before jinja2 sees it. This is
done by hijacking the variable storage that jinja2 uses, and overriding __contains__
and __getitem__ to look like a dict. Added bonus is avoiding duplicating the large
hashes that inject tends to be.</p>
<p>To facilitate using builtin jinja2 things like range, globals are also handled here.</p>
<dl class="method">
<dt id="ansible.template.vars.AnsibleJ2Vars.add_locals">
<code class="descname">add_locals</code><span class="sig-paren">(</span><em>locals</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/ansible/template/vars.html#AnsibleJ2Vars.add_locals"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ansible.template.vars.AnsibleJ2Vars.add_locals" title="Permalink to this definition">¶</a></dt>
<dd><p>If locals are provided, create a copy of self containing those
locals in addition to what is already in this variable proxy.</p>
</dd></dl>

</dd></dl>

</div>
</div>


           </div>
          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2016, Red Hat.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'1',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>